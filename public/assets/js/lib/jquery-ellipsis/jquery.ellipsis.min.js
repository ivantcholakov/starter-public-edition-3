/**
* Ellipsis plugin (jQuery) - For when text is too l ...
*
* @fileOverview  A slightly smarter way of truncating text
* @author        Dan Beam <dan@danbeam.org>
* @param         {object} conf - configuration objects to override the defaults
* @return        {jQuery} an instance of jQuery with the original nodes
*
* Copyright (c) 2010 Dan Beam
* Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/
;(function(f){var d=0.01,g=function(j,i){return Math.abs(j-i)<=d;},b=function(j,i){return j-i>=d;},e=function(j,i){return j-i<=d;},h="ellipsis-original-text",c=false,a={"white-space":"nowrap",overflow:"hidden"};f.fn.ellipsis=function(i){i=f.extend({ellipsis:"\u2026",fudge:0,lines:1,remember:true,"native":true},i||{});return this.each(function(){var r=f(this),l=i.remember&&r.data(h)||r.text(),m=l.length,k=m,p=f(document.createElement(r[0].nodeName)),q,n,j,o;p.css({overflow:"hidden",position:"absolute",visibility:"hidden",bottom:"-10px",right:"-10px",display:"block",width:r.css("width"),fontSize:r.css("font-size"),fontFamily:r.css("font-family"),fontWeight:r.css("font-weight"),letterSpacing:r.css("letter-spacing")});p.text("s");f("body").append(p);q=p.height();if(c&&i["native"]&&i.lines==1&&i.ellipsis==="\u2026"){r.css(a);r.css("height",q+"px");p.remove();return;}p.css("overflow","visible");n=i.lines*q;p.text(l);j=p.height();if((e(j,n)||g(j,n))&&l.length===r.text().length){p.remove();return;}for(;k>=1;){k=Math.floor(k/2);m+=b(j,n)?-k:+k;p.text(l.slice(0,m-i.ellipsis.length)+i.ellipsis);j=p.height();if(e(j,n)||g(j,n)){o=m;}}p.remove();if(i.remember&&!r.data(h)){r.data(h,l);}if(l.length===(p.text().length-i.ellipsis.length)){r.text(l);}else{if("undefined"!==typeof o){r.text(l.slice(0,o-i.ellipsis.length-i.fudge)+i.ellipsis);}}});};f.extend({ellipsis:{nativeSupport:false}});f(function(){var k=f('<div style="visibility:hidden;position:absolute;white-space:nowrap;overflow:hidden;"></div>'),j=["text-overflow","-o-text-overflow"];f(j).each(function(l,m){k.css(m,"ellipsis");});f("body").append(k);var i=k.clone(true);f(j).each(function(l,m){if("ellipsis"===f(i).css(m)){c=m;a[c]="ellipsis";f.ellipsis.nativeSupport=true;return false;}});k.remove();i=k=null;});})(jQuery);